<!DOCTYPE html>
<html lang="pl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram Combot Stats Login</title>
  <!-- <meta http-equiv="Content-Security-Policy"  content=" frame-ancestors http://127.0.0.1/" /> -->

  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <link rel="stylesheet" href="">
  <script type="text/javascript" defer>
    function onTelegramAuth(user) {
      console.log({ user })
      const userDetailsCompoenent = document.getElementById('telegram_user_details')
      userDetailsCompoenent.innerText = `<a href="https://combot.org/c/-1001362720327/a" >
        [Logged in as ${user.first_name}  ${user.last_name} ${user.id} ${user.username}] 
        </a>`

//   {
//     "user": {
//         "id": 2016064409,
//         "first_name": "Adam",
//         "last_name": "Szreiber",
//         "username": "adam_szreiber",
//         "auth_date": 1658303535,
//         "hash": "b63504eddedc8cc9d352259c02a13c9d4d8caf8043a516adf0f95b084cce128c"
//     }
//  }
      
    }
    
  </script>
</head>

<body>

  <script async src="https://telegram.org/js/telegram-widget.js?19" data-telegram-login="test_telegram_daily_bot" data-size="large"
    data-onauth="onTelegramAuth(user)" data-request-access="write">
  </script>

  <iframe id="telegram-login-combot" src="https://oauth.telegram.org/embed/combot?origin=http://127.0.0.1&amp;size=large&amp;request_access=write" width="238" height="40" frameborder="0" scrolling="no" style="overflow: hidden; border: none; height: 40px; width: 276px;"></iframe>

  <div>
    <p id="telegram_user_details">
      []
    </p>
  </div>
  <button onclick="login()" id="telegram_login_btn">onClick</button>
  <iframe src="http://example.com/" ></iframe>
</body>

</html>
